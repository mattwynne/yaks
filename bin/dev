#!/usr/bin/env bash
# @cmd Create a release zip file
# @alias r
release() {
  nix build
}

# @cmd Run shellcheck on all shell files
# @alias l
lint() {
  local exit_code=0

  # Check bin/yx explicitly
  if ! shellcheck bin/yx; then
    exit_code=1
  fi

  # Find and check all .sh files
  while IFS= read -r -d '' file; do
    if ! shellcheck "$file"; then
      exit_code=1
    fi
  done < <(find . -name "*.sh" -print0)

  return $exit_code
}

# @cmd Run tests (shellspec)
# @alias t
test() {
  shellspec
}

eval "$(argc --argc-eval "$0" "$@")"
